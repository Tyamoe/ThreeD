precision mediump float;

varying vec2 fragTexCoord;
varying float vDistance;
varying vec2 u_FogDist;

uniform sampler2D sampler;
uniform vec4 tcolor;

void main()
{
	const float FogDensity = 0.04;
	vec4 u_FogColor = vec4(0.323, 0.323, 0.423, 1.0);

	//float fogFactor = clamp((u_FogDist.y - vDistance) / (u_FogDist.y - u_FogDist.x), 0.0, 1.0);
	float fogFactor = clamp((1.0 /exp(vDistance * FogDensity)), 0.0, 1.0);

	vec4 color = mix(u_FogColor, texture2D(sampler, fragTexCoord), fogFactor);

	//gl_FragColor = color;

	gl_FragColor = texture2D(sampler, fragTexCoord) * tcolor;
	//gl_FragColor = mix(texture2D(sampler, fragTexCoord), tcolor, 0.0);
}